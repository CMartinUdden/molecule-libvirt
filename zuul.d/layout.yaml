---
# zuul.d/layout.yaml
- job:
    name: ansible-tox-packaging
    parent: ansible-tox-molecule
    timeout: 3600
    vars:
      tox_envlist: packaging

- project:
    check:
      jobs: &defaults
        # tier 1
        - ansible-tox-linters:
            vars:
              tox_envlist: lint
        - ansible-tox-packaging
        # TODO(ssbarnea): Find a py35 platform without broken libvirt
        # - ansible-tox-py35:
        #     # https://bugs.launchpad.net/ubuntu/+source/libvirt/+bug/1588004
        #     # sudo systemctl enable --now libvirtd
        #     # Failed to execute operation: Too many levels of symbolic links
        - ansible-tox-py36
        - ansible-tox-py37
        - ansible-tox-devel
    gate:
      jobs: *defaults
